#!/bin/bash

# Usage: http view <filename.html>
# Description: Starts a server (if needed) and opens the HTML file

if [ "$1" != "view" ]; then
  echo "Usage: http view <filename.html>"
  exit 1
fi

filename="$2"
port=8000

# Check if the server is already running
if ! lsof -i :$port >/dev/null 2>&1; then
  echo "Starting Python HTTP server on port $port..."
  nohup python -m http.server $port > /dev/null 2>&1 &
  sleep 1
else
  echo "Server already running on port $port"
fi

# Open the file in the browser
if [ -n "$filename" ]; then
  echo "Opening http://localhost:$port/$filename"
  start "http://localhost:$port/$filename"
else
  echo "Usage: http view <filename.html>"
fi
